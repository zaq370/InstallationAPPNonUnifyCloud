@model InstallationAPP2024.ViewModels.CustomerDetailsViewModel
@using Newtonsoft.Json
@{
    Layout = "~/Views/Shared/" + @ViewBag.Layout;
}

<script>
    @*var modelMessage = '@Html.Raw(Model.Message)';*@
    var alertMessageFromModel = "@Html.Raw(Model.AlertMessage)";
    var fieldDisplayName = @Html.Raw(Json.Encode(Model.FieldDispalyName));
    (function () {
        try {
            if (alertMessageFromModel != null && alertMessageFromModel != "") alert(alertMessageFromModel);
        } catch (e) { }
    })();
</script>
<form id="CustomerDetailForm" class="form1" enctype="multipart/form-data">
    <div class="container" id="body-container">
        <div class="row">
            <div class="col-md-12">
                <div id="form-container">
                    <div class="row">
                        <div class="form-horizontal">
                            <div class="col-md-11">
                                <div class='form-group'>
                                    <label class='control-label col-md-2 col-md-offset-2'>
                                        @CustomHelper.DisplayName(Model.FieldDispalyName, Html.DisplayNameFor(model => model.Company))
                                    </label>
                                    <div class='col-md-6'>
                                        <div class='form-group internal'>
                                            <div class='col-md-11'>
                                                @Html.TextBoxFor(model => model.Company, new { @class = "input-block-level input-field", @readonly = "readonly" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class='form-group'>
                                    <label class='control-label col-md-2 col-md-offset-2'>
                                        @CustomHelper.DisplayName(Model.FieldDispalyName, Html.DisplayNameFor(model => model.PrimaryContactForename))
                                    </label>
                                    <div class='col-md-6'>
                                        <div class='form-group internal'>
                                            <div class='col-md-11'>
                                                @Html.TextBoxFor(model => model.PrimaryContactForename, new { @class = "input-block-level input-field", @readonly = "readonly" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class='form-group'>
                                    <label class='control-label col-md-2 col-md-offset-2'>
                                        @CustomHelper.DisplayName(Model.FieldDispalyName, Html.DisplayNameFor(model => model.PrimaryContactSurname))
                                    </label>
                                    <div class='col-md-6'>
                                        <div class='form-group internal'>
                                            <div class='col-md-11'>
                                                @Html.TextBoxFor(model => model.PrimaryContactSurname, new { @class = "input-block-level input-field", @readonly = "readonly" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class='form-group'>
                                    <label class='control-label col-md-2 col-md-offset-2'>
                                        @CustomHelper.DisplayName(Model.FieldDispalyName, Html.DisplayNameFor(model => model.AssociatedContacts))
                                    </label>
                                    <div class='col-md-6'>
                                        <div class='form-group internal'>
                                            <div class='col-md-11'>
                                                <div class="table table-hover" style="background-color: #ffffff">
                                                    <table class="gv_contact">
                                                        <tr class="space header">
                                                            <th>
                                                                @ViewBag.Forename
                                                            </th>
                                                            <th>
                                                                @ViewBag.Surname
                                                            </th>
                                                        </tr>
                                                        @if (Model.AssociatedContacts != null) { 
                                                            foreach (var contact in Model.AssociatedContacts)
                                                            {
                                                                <tr class="space body">
                                                                    <td>
                                                                        @Html.DisplayFor(item => contact.Forename)
                                                                    </td>
                                                                    <td>
                                                                        @Html.DisplayFor(item => contact.Surname)
                                                                    </td>
                                                                </tr>
                                                            }
                                                        }
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
 <script>
    (function () {
        //載入上方的底圖
        //document.getElementById("jumbotronImg").style.backgroundImage = 'url(/../Content/custom/images/CaseHeader/customer-details.jpg)';
        document.getElementById("jumbotronImg").style.backgroundImage = "url(" + '@Url.Content("~/Content/custom/images/CaseHeader/customer-details.jpg")' + ")";

        //共用目錄中按鈕的名稱反白 (jQuery還沒載入，所以直接用JS)
        document.getElementById("menubarModifyProfileM").parentElement.classList.add("active");

    })();
</script>  

